# Программа для тестирования сценариев

Интерпретатор сценариев.

## Описание файла сценариев

Сценарии хранятся в файле json. Структура файла:

| Поле             | Опционален? | Тип    | Описание |
|:----------------:|:-----------:|:------:|:---------|
|`states_container`|             | Список | Список всех возможных состояний. |

## Описание состояния

| Поле             | Опционален?| Тип        | Описание |
|:----------------:|:----------:|:----------:|:---------|
| `id`             |            | Строка     | Уникальное название состояния. |
| `call`           | +          | Строка     | При переходе на это состояние вызвать внутрипрограммную функцию. |
| `execute`        | +          | Строка     | При переходе на это состояние исполнить код внутри строки. По умолчанию Python. |
| `is_start_state` | +          | Логический | Является ли состояние точкой входа в сценарий. |
| `message`        | +          | Строка     | При переходе на это состояние вывести простое текстовое сообщение. |
| `next`           | +          | Список     | Список состояний, в которые можно попасть из текущего. |
| `type`           | +          | Строка     | Разрешённый тип для параметра. |
| `var_name`       | +          | Строка     | Если состояние требует сохранения ввода пользователя, то необходимо указать название ключа, по которому пользовательский ввод будет сохранён. |

Особенности:
* если поле `var_name` не задано, программа автоматически переходит к следующему состоянию;
* при интерпретации выбирается одно из полей (в порядке понижения приоритета): `call`, `message`, `execute`;
* если поле `next` не указано или указан пустой список, то завершить выполнение сценария;
* по умолчанию значение поля `type` равно `string`.

## Описание состояний в списке поля `next`

| Поле      | Опционален? | Тип    | Описание |
|:---------:|:-----------:|:------:|:---------|
| `id`      |             | Строка | Название следующего состояния. |
| `if`      | +           | Строка | Условие для перехода на состояние. Требует **require**, если использует параметры из контекста. По умолчанию Python. |
| `require` | +           | Список | Список названий необходимых переменных для, например, проведения сравнения. |

## Пример списка типов параметров

* `string` - строка;
* `integer` - целое число;
* `positive_integer` - целое положительное число;
* `decimal` - число с плавающей точкой.

## Описание контекста **Context**

Хранит данные. Во время выполнения сценария хранит дополнительные переменные:
* `__type` - тип сценария, или название состояния, с которого началось выполнение сценария.
* `__state` - название состояния, на котором завершилось выполнение программы.

Значение может быть получено по ключу. Также имеется возможность использования значений по ключу внутри строк-скриптов. Например, `int(age) >= 18`.
